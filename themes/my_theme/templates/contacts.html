{% extends "base.html" %}

{% block content %}
<div class="container contact-page mt-5">
    <div class="row">
        <!-- Основной блок контактов -->
        <div class="col-lg-6">
            <h1 class="mb-4">Свяжитесь со мной</h1>
            
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h2 class="h4"><i class="fas fa-envelope me-2"></i>Почта</h2>
                    <p>
                        <a href="mailto:lara.dyrdina.dev@yandex.ru" class="text-decoration-none">
                            lara.dyrdina.dev@yandex.ru
                        </a>
                    </p>
                </div>
            </div>

            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h2 class="h4"><i class="fab fa-github me-2"></i>GitHub</h2>
                    <p>
                        <a href="https://github.com/Aw-Sea" target="_blank" class="text-decoration-none">
                            github.com/Aw-Sea
                        </a>
                    </p>
                </div>
            </div>

            <div class="card shadow-sm">
                <div class="card-body">
                    <h2 class="h4"><i class="fab fa-telegram me-2"></i>Telegram</h2>
                    <p>
                        <a href="https://t.me/Aw-Sea" target="_blank" class="text-decoration-none">
                            @Aw-Sea
                        </a>
                    </p>
                </div>
            </div>
        </div>  <!-- Закрытие первого col-lg-6 -->

        <!-- Форма обратной связи -->
        <div class="col-lg-6 mt-4 mt-lg-0">
            <div class="card shadow">
                <div class="card-body">
                    <h2 class="h4 mb-4"><i class="fas fa-paper-plane me-2"></i>Форма обратной связи</h2>

                    <form action="https://formcarry.com/s/Yb73cw2rLrg" method="POST" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="name" class="form-label">Ваше имя</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>

                        <div class="mb-3">
                            <label for="message" class="form-label">Сообщение</label>
                            <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                        </div>

                        <input type="hidden" name="_subject" value="Новое сообщение с сайта-портфолио">

                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-paper-plane me-2"></i>Отправить
                        </button>
                    </form>

                    <div id="formSuccess" class="alert alert-success mt-3 d-none">
                        ✅ Сообщение отправлено! Я свяжусь с вами в ближайшее время.
                    </div>
                </div>
            </div>
        </div>  <!-- Закрытие второго col-lg-6 -->
    </div>  <!-- Закрытие row -->
</div>  <!-- Закрытие container -->

<script>
// Обработка формы
document.querySelector('form').addEventListener('submit', async function(e) {
    e.preventDefault();

    const form = this;
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;

    // Показываем загрузку
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Отправка...';
    submitBtn.disabled = true;

    try {
        const response = await fetch(form.action, {
            method: 'POST',
            body: new FormData(form),
            headers: {
                'Accept': 'application/json'
            }
        });

        if (response.ok) {
            // Успех
            document.getElementById('formSuccess').classList.remove('d-none');
            form.reset();
            setTimeout(() => {
                document.getElementById('formSuccess').classList.add('d-none');
            }, 5000);
        } else {
            throw new Error('Ошибка отправки');
        }
    } catch (error) {
        alert('Ошибка отправки сообщения. Напишите мне напрямую на lara.dyrdina@yandex.ru');
    } finally {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }
});
</script>
{% endblock %}